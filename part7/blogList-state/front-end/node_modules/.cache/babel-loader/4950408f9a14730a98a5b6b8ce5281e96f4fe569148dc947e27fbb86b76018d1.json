{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport blogServices from \"../services/blogs\";\nconst blog = createSlice({\n  name: \"blog\",\n  initialState: {\n    blogList: [],\n    loading: false,\n    error: null\n  },\n  reducers: {\n    fetchBlogListStart: (state, action) => {\n      state.loading = true;\n      state.error = null;\n    },\n    fetchBlogListSuccess: (state, action) => {\n      state.loading = false;\n      state.blogList = action.payload;\n    },\n    fetchBlogListFailure: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    createBlog(state, action) {\n      state.loading = false;\n      state.blogList = state.blogList.concat(action.payload);\n    },\n    removeBlog(state, action) {\n      state.loading = false;\n      state.blogList = state.blogList.filter(blog => blog.id !== action.payload);\n    },\n    upBlog(state, action) {\n      state.loading = false;\n      state.blogList = state.blogList.map(blog => blog.id !== action.payload.id ? blog : action.payload);\n    }\n  }\n});\nexport const fetchBlogList = () => {\n  return async dispatch => {\n    try {\n      const response = await blogServices.getAll();\n      dispatch(fetchBlogListSuccess(response));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const addBlogList = blog => {\n  return async dispatch => {\n    try {\n      const resp = await blogServices.create(blog);\n      dispatch(createBlog(resp));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const deleteBlog = id => {\n  return async dispatch => {\n    try {\n      await blogServices.remove(id);\n      dispatch(removeBlog(id));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const updateBlog = (id, blog) => {\n  return async dispatch => {\n    try {\n      const updatedBlog = {\n        ...blog,\n        likes: Number(blog.likes) + 1,\n        user: blog.user.id\n      };\n      const resp = await blogServices.update(id, updatedBlog);\n      const newBlog = {\n        ...resp,\n        user: blog.user\n      };\n      dispatch(upBlog(newBlog));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const addComment = (blog, comment) => {\n  return async dispatch => {\n    try {\n      const updatedBlog = {\n        ...blog,\n        comments: blog.comments.concat(comment)\n      };\n      const resp = await blogServices.update(blog.id, updatedBlog);\n      const newBlog = {\n        ...resp,\n        user: blog.user\n      };\n      dispatch(upBlog(newBlog));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const {\n  fetchBlogListStart,\n  fetchBlogListSuccess,\n  fetchBlogListFailure,\n  createBlog,\n  removeBlog,\n  upBlog\n} = blog.actions;\nexport default blog.reducer;","map":{"version":3,"names":["createSlice","blogServices","blog","name","initialState","blogList","loading","error","reducers","fetchBlogListStart","state","action","fetchBlogListSuccess","payload","fetchBlogListFailure","createBlog","concat","removeBlog","filter","id","upBlog","map","fetchBlogList","dispatch","response","getAll","message","addBlogList","resp","create","deleteBlog","remove","updateBlog","updatedBlog","likes","Number","user","update","newBlog","addComment","comment","comments","actions","reducer"],"sources":["/Users/aymaneharkati/Desktop/stack/Full-Stack-Open/part7/blogList-state/front-end/src/reducers/blogRedcuers.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport blogServices from \"../services/blogs\";\n\nconst blog = createSlice({\n  name: \"blog\",\n  initialState: {\n    blogList: [],\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    fetchBlogListStart: (state, action) => {\n      state.loading = true;\n      state.error = null;\n    },\n    fetchBlogListSuccess: (state, action) => {\n      state.loading = false;\n      state.blogList = action.payload;\n    },\n    fetchBlogListFailure: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    },\n    createBlog(state, action) {\n      state.loading = false;\n      state.blogList = state.blogList.concat(action.payload);\n    },\n    removeBlog(state, action) {\n      state.loading = false;\n      state.blogList = state.blogList.filter(\n        (blog) => blog.id !== action.payload,\n      );\n    },\n    upBlog(state, action) {\n      state.loading = false;\n      state.blogList = state.blogList.map((blog) =>\n        blog.id !== action.payload.id ? blog : action.payload,\n      );\n    },\n  },\n});\n\nexport const fetchBlogList = () => {\n  return async (dispatch) => {\n    try {\n      const response = await blogServices.getAll();\n      dispatch(fetchBlogListSuccess(response));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\n\nexport const addBlogList = (blog) => {\n  return async (dispatch) => {\n    try {\n      const resp = await blogServices.create(blog);\n      dispatch(createBlog(resp));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const deleteBlog = (id) => {\n  return async (dispatch) => {\n    try {\n      await blogServices.remove(id);\n      dispatch(removeBlog(id));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\nexport const updateBlog = (id, blog) => {\n  return async (dispatch) => {\n    try {\n      const updatedBlog = {\n        ...blog,\n        likes: Number(blog.likes) + 1,\n        user: blog.user.id,\n      };\n      const resp = await blogServices.update(id, updatedBlog);\n      const newBlog = { ...resp, user: blog.user };\n      dispatch(upBlog(newBlog));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\n\nexport const addComment = (blog, comment) => {\n  return async (dispatch) => {\n    try {\n      const updatedBlog = {\n        ...blog,\n        comments: blog.comments.concat(comment),\n      };\n      const resp = await blogServices.update(blog.id, updatedBlog);\n      const newBlog = { ...resp, user: blog.user };\n      dispatch(upBlog(newBlog));\n    } catch (error) {\n      dispatch(fetchBlogListFailure(error.message));\n    }\n  };\n};\n\nexport const {\n  fetchBlogListStart,\n  fetchBlogListSuccess,\n  fetchBlogListFailure,\n  createBlog,\n  removeBlog,\n  upBlog,\n} = blog.actions;\n\nexport default blog.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}